C51 COMPILER V9.54   DISPLAY                                                               06/20/2022 10:14:12 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE DISPLAY
OBJECT MODULE PLACED IN display.OBJ
COMPILER INVOKED BY: D:\keilC51\C51\BIN\C51.EXE display.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include "display.h"
   2          
   3          sbit dula = P2 ^ 6;
   4          sbit wela = P2 ^ 7;
   5          unsigned char code wei[] = {0xfe, 0xfd, 0xfb, 0xf7, 0xef, 0xdf, 0xbf, 0x7f, 0xff};                    // å
             -…«æ®µä½ç 
   6          unsigned char code duan[] = {0x3f, 0x06, 0x5b, 0x4f, 0x66, 0x6d, 0x7d, 0x07, 0x7f, 0x6f, 0x40, 0x00}; //  
             -æ®µç '0'~'9' '-' 'null'
   7          
   8          unsigned char show[8] = {0};
   9          int timer = 0, hour = 10, min = 0, sec = 0; // æ—¶é—´å˜é‡
  10          
  11          void display(unsigned char d, unsigned char w) // æ˜¾ç¤ºå‡½æ•°
  12          {
  13   1          P0 = 0xff; // æ¶ˆéš
  14   1          wela = 1;
  15   1          wela = 0;
  16   1          P0 = duan[d]; // æ®µ
  17   1          dula = 1;
  18   1          dula = 0;
  19   1          P0 = wei[w]; // ä½
  20   1          wela = 1;
  21   1          wela = 0;
  22   1      }
  23          
  24          void reset_show() // è®¾ç½®æ˜¾ç¤ºæ•°å€¼
  25          {
  26   1          int i = timer - ((timer >> 3) << 3);
  27   1          unsigned char temp = 0;
  28   1          shine_flag = timer < 500 && timer >= 0 ? 0 : 1; // åˆ¤æ–­æ˜¯å¦éœ€è¦é—ªçƒ
  29   1          switch (i)
  30   1          {
  31   2          case 0:
  32   2              temp = (shine_flag && (key_position == 1)) ? 11 : hour / 10; // æ˜¾ç¤ºæ—¶é’Ÿç¬¬ä¸€ä½ åˆ¤æ–­æ˜¯å¦
             -éœ€è¦é—ªçƒ
  33   2              break;
  34   2          case 1:
  35   2              temp = (shine_flag && (key_position == 1)) ? 11 : hour % 10; // æ˜¾ç¤ºæ—¶é’Ÿç¬¬äºŒä½
  36   2              break;
  37   2          case 2:
  38   2              temp = 10; // æ˜¾ç¤ºåˆ†éš”ç¬¦ -
  39   2              break;
  40   2          case 3:
  41   2              temp = (shine_flag && (key_position == 2)) ? 11 : min / 10; // æ˜¾ç¤ºæ—¶é’Ÿç¬¬ä¸‰ä½
  42   2              break;
  43   2          case 4:
  44   2              temp = (shine_flag && (key_position == 2)) ? 11 : min % 10; // æ˜¾ç¤ºæ—¶é’Ÿç¬¬å››ä½
  45   2              break;
  46   2          case 5:
  47   2              temp = 10; // æ˜¾ç¤ºåˆ†éš”ç¬¦ -
  48   2              break;
  49   2          case 6:
  50   2              temp = (shine_flag && (key_position == 3)) ? 11 : sec / 10; // æ˜¾ç¤ºæ—¶é’Ÿç¬¬äº”ä½
  51   2              break;
  52   2          case 7:
C51 COMPILER V9.54   DISPLAY                                                               06/20/2022 10:14:12 PAGE 2   

  53   2              temp = (shine_flag && (key_position == 3)) ? 11 : sec % 10; // æ˜¾ç¤ºæ—¶é’Ÿç¬¬å…­ä½
  54   2              break;
  55   2          }
  56   1          show[i] = temp;
  57   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    330    ----
   CONSTANT SIZE    =     21    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     19       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
